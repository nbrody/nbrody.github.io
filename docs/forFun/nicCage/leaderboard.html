<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scavenger Hunt Leaderboard - Nic unCaged</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Lato:wght@300;400;700&display=swap"
        rel="stylesheet">
    <style>
        .camera-container {
            position: relative;
            /* Adjust size to match the aspect ratio of your templates if known. 
               Assuming portrait 3:4 or similar. */
            width: 320px;
            height: 420px;
            margin: 20px auto;
            border: 2px solid var(--primary-gold);
            border-radius: 10px;
            overflow: hidden;
            background: #000;
        }

        #video {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transform: scaleX(-1);
            /* Mirror the selfie view for better UX */
        }

        #canvas {
            display: none;
        }

        .poster-preview {
            max-width: 100%;
            margin-top: 20px;
            border: 2px solid var(--primary-gold);
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.5);
            display: none;
        }

        .controls {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 20px;
        }

        .hidden {
            display: none !important;
        }

        /* Overlay Image for Alignment */
        #alignment-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            opacity: 0.8;
            /* Use object-fit contain or cover to match how the final photo sits? 
               Usually cover if the whole container is the frame */
            object-fit: cover;
            z-index: 10;
        }
    </style>
</head>

<body>
    <div class="background-overlay"></div>
    <main class="container">
        <header>
            <h1 class="title">Hall of Fame</h1>
            <p class="subtitle">Immortalize Your Victory</p>
        </header>

        <section id="entry-step" class="glass-panel">
            <h2>Claim Your Spot</h2>
            <p>Enter your name to be added to the winners list.</p>
            <div class="input-group">
                <input type="text" id="agent-name" placeholder="Your Name..."
                    style="width: 100%; padding: 15px; border-radius: 8px; border: 1px solid var(--glass-border); background: rgba(0,0,0,0.3); color: var(--text-light); font-size: 1.1rem; margin-bottom: 20px;">
            </div>
            <button id="next-to-camera" class="cta-button">Take Victory Photo</button>
        </section>

        <section id="camera-step" class="glass-panel hidden">
            <h2>Face Off</h2>
            <p>Align your face using the guide below.</p>

            <div class="camera-container">
                <video id="video" autoplay playsinline></video>
                <!-- This image overlays the camera for alignment -->
                <img id="alignment-overlay" src="selfieTemplateZoom.png" alt="Alignment Guide"
                    onload="this.parentElement.style.aspectRatio = this.naturalWidth / this.naturalHeight + ''; this.parentElement.style.height = 'auto';">
            </div>

            <div class="controls">
                <button id="capture-btn" class="cta-button">Capture Moment</button>
            </div>
        </section>

        <section id="result-step" class="glass-panel hidden">
            <h2>Victory Recorded</h2>
            <p>You have successfully decoded the secrets.</p>
            <canvas id="canvas"></canvas>



            <img id="poster-final" class="poster-preview">
            <div class="controls">
                <button id="download-btn" class="cta-button">Download Souvenir</button>
                <button id="view-gallery-btn" class="cta-button" style="background: rgba(212, 175, 55, 0.2);">View Hall
                    of Fame</button>
                <button id="restart-btn" class="cta-button" style="background: rgba(255,255,255,0.1);">Back to
                    Hub</button>
            </div>
        </section>

        <section id="gallery-step" class="glass-panel hidden">
            <h2>Hall of Fame</h2>
            <p>The elite collective of Cage hunters who successfully recovered the Declaration.</p>

            <div style="text-align: center; margin: 15px 0;">
                <button id="cageify-all-btn" class="cta-button"
                    style="background: var(--primary-gold); color: #000; font-weight: bold;">Cageify Everyone</button>
            </div>

            <div id="gallery-grid"
                style="display: grid; grid-template-columns: 1fr; gap: 20px; margin-top: 20px; max-width: 600px; margin-left: auto; margin-right: auto;">
                <!-- Dossiers will appear here -->
            </div>
            <div class="controls">
                <button id="back-from-gallery" class="cta-button">Return to Photo</button>
                <button id="clear-gallery-btn" class="cta-button"
                    style="background: rgba(255, 0, 0, 0.3); border-color: #ff4444;">Clear Registry</button>
            </div>
        </section>
    </main>

    <script src="leaderboard.js"></script>
</body>

</html>