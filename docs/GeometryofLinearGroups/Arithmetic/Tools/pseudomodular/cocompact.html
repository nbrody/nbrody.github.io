<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Transitivity on ℚℙ¹ — A Height Reduction Proof</title>
    <meta name="description"
        content="Proof that the subgroup G of PGL₂(ℤ[1/2]) generated by S, D, and A acts transitively on the rational projective line, using an interactive height reduction algorithm." />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&family=Lora:ital,wght@0,400;0,600;1,400&display=swap"
        rel="stylesheet">
    <script>
        window.MathJax = {
            tex: { inlineMath: [['$', '$'], ['\\(', '\\)']], displayMath: [['$$', '$$'], ['\\[', '\\]']] },
            svg: { fontCache: 'global' }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="stylesheet" href="families.css" />
    <style>
        /* Additional styles for this page */
        .gen-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 16px;
            margin: 20px 0;
        }

        .gen-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 16px;
            text-align: center;
        }

        .gen-card h4 {
            color: var(--accent-bright);
            font-size: 1.1rem;
            margin-bottom: 6px;
        }

        .gen-card .mat {
            font-family: var(--font-mono);
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin: 8px 0;
        }

        .gen-card .action {
            font-size: 0.85rem;
            color: var(--text-dim);
        }

        .interactive-box {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 24px;
            margin: 24px 0;
        }

        .interactive-box h3 {
            color: var(--accent-bright);
            margin: 0 0 16px;
        }

        .input-area {
            display: flex;
            gap: 12px;
            align-items: center;
            flex-wrap: wrap;
            margin-bottom: 16px;
        }

        .input-area label {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .input-area input[type="text"] {
            width: 80px;
            background: var(--bg-input);
            border: 1px solid var(--border);
            color: var(--text-primary);
            font-family: var(--font-mono);
            font-size: 1rem;
            padding: 8px 12px;
            border-radius: var(--radius-sm);
            outline: none;
        }

        .input-area input:focus {
            border-color: var(--accent);
            box-shadow: 0 0 0 3px var(--accent-glow);
        }

        .run-btn {
            padding: 8px 20px;
            background: var(--gradient-1);
            color: #fff;
            border: none;
            border-radius: var(--radius-sm);
            font-weight: 600;
            cursor: pointer;
            transition: opacity 0.2s, transform 0.1s;
        }

        .run-btn:hover {
            opacity: 0.9;
            transform: translateY(-1px);
        }

        .batch-btn {
            padding: 8px 16px;
            background: var(--bg-input);
            color: var(--accent);
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            font-size: 0.82rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .batch-btn:hover {
            border-color: var(--accent);
            background: rgba(99, 102, 241, 0.08);
        }

        #reduction-output {
            font-family: var(--font-mono);
            font-size: 0.82rem;
            line-height: 2;
            color: var(--text-secondary);
            min-height: 40px;
            white-space: pre-wrap;
        }

        #reduction-output .step {
            display: inline;
        }

        #reduction-output .arrow {
            color: var(--text-dim);
            margin: 0 4px;
        }

        #reduction-output .gen-label {
            color: var(--accent);
            font-weight: 500;
        }

        #reduction-output .frac {
            color: var(--text-primary);
        }

        #reduction-output .frac-final {
            color: var(--success);
            font-weight: 600;
        }

        #reduction-output .height-tag {
            color: var(--text-dim);
            font-size: 0.72rem;
        }

        #batch-output {
            font-family: var(--font-mono);
            font-size: 0.78rem;
            line-height: 1.6;
            color: var(--text-secondary);
            max-height: 300px;
            overflow-y: auto;
            margin-top: 12px;
        }

        .batch-row {
            display: flex;
            gap: 8px;
            padding: 2px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.03);
        }

        .batch-frac {
            min-width: 50px;
            color: var(--text-primary);
        }

        .batch-steps {
            color: var(--accent);
            min-width: 40px;
        }

        .batch-path {
            color: var(--text-dim);
        }

        .batch-ok {
            color: var(--success);
        }

        .batch-fail {
            color: var(--danger);
        }

        .case-box {
            margin: 12px 0;
            padding: 14px 18px;
            border-left: 3px solid var(--accent);
            background: rgba(99, 102, 241, 0.04);
            border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
        }

        .case-box h4 {
            color: var(--accent-bright);
            margin: 0 0 6px;
            font-size: 0.95rem;
        }

        .case-box p {
            margin-bottom: 6px;
        }

        @media (max-width: 700px) {
            .gen-grid {
                grid-template-columns: 1fr;
            }

            .input-area {
                flex-direction: column;
                align-items: flex-start;
            }
        }
    </style>
</head>

<body>
    <nav id="topnav">
        <a href="index.html" class="nav-back">← Explorer</a>
        <span class="nav-title">Transitivity on ℚℙ¹</span>
        <span class="nav-ref">Height Reduction</span>
    </nav>

    <main id="article">
        <section class="hero">
            <h1>Transitivity on $\mathbb{Q}\mathbb{P}^1$<br><span class="hero-sub">A Height Reduction Proof</span></h1>
            <p class="hero-abstract">We prove that the subgroup $G \le \mathrm{PGL}_2(\mathbb{Z}[\tfrac{1}{2}])$
                generated by $S$, $D$, and $A$ acts <strong>transitively</strong> on the rational projective line
                $\mathbb{QP}^1 = \mathbb{Q}\cup\{\infty\}$: every rational number can be mapped to $\infty$ by a
                sequence of generators.</p>
        </section>

        <nav class="toc">
            <h2>Contents</h2>
            <ol>
                <li><a href="#sec-setup">The Group and Its Generators</a></li>
                <li><a href="#sec-height">The Height Function</a></li>
                <li><a href="#sec-proof">The Reduction Argument</a></li>
                <li><a href="#sec-interactive">Interactive Reducer</a></li>
                <li><a href="#sec-geometric">Geometric Interpretation</a></li>
            </ol>
        </nav>

        <!-- §1 -->
        <section id="sec-setup" class="content-section">
            <h2><span class="sec-num">1</span> The Group and Its Generators</h2>
            <p>Let $G \le \mathrm{PGL}_2(\mathbb{Z}[\tfrac{1}{2}])$ be the group generated by the following three
                matrices:</p>
            <div class="gen-grid">
                <div class="gen-card">
                    <h4>$S$</h4>
                    <div class="mat">$\begin{pmatrix} 0 & -1 \\ 1 & 0 \end{pmatrix}$</div>
                    <div class="action">$z \mapsto -1/z$</div>
                    <div class="action" style="color:var(--text-dim)">Inversion</div>
                </div>
                <div class="gen-card">
                    <h4>$D$</h4>
                    <div class="mat">$\begin{pmatrix} 2 & 0 \\ 0 & 1 \end{pmatrix}$</div>
                    <div class="action">$z \mapsto 2z$</div>
                    <div class="action" style="color:var(--text-dim)">Doubling</div>
                </div>
                <div class="gen-card">
                    <h4>$A$</h4>
                    <div class="mat">$\begin{pmatrix} 5 & 2 \\ 2 & 1 \end{pmatrix}$</div>
                    <div class="action">$z \mapsto \frac{5z+2}{2z+1}$</div>
                    <div class="action" style="color:var(--text-dim)">$\det A = 1$</div>
                </div>
            </div>
            <p>Since $\det(S) = 1$, $\det(D) = 2$, and $\det(A) = 1$, these matrices lie in
                $\mathrm{GL}_2(\mathbb{Z}[\tfrac{1}{2}])$, and their images generate a subgroup $G$ of
                $\mathrm{PGL}_2(\mathbb{Z}[\tfrac{1}{2}])$.</p>

            <div class="remark-box">
                <h3>Key Orbits</h3>
                <p>Some useful facts:</p>
                <ul>
                    <li>$S(\infty) = 0$, so $0 \in G\cdot\infty$.</li>
                    <li>$A(-\tfrac{1}{2}) = \frac{5(-1/2)+2}{2(-1/2)+1} = \frac{-1/2}{0} = \infty$, so $-\tfrac{1}{2}
                        \in G\cdot\infty$.</li>
                    <li>$A^{-1} = \begin{pmatrix}1&-2\\-2&5\end{pmatrix}$ maps $\frac{5}{2} \mapsto \infty$, so
                        $\frac{5}{2} \in G\cdot\infty$.</li>
                    <li>$D$ gives us $2^k \cdot x$ for any $x$ already in the orbit.</li>
                </ul>
            </div>
        </section>

        <!-- §2 -->
        <section id="sec-height" class="content-section">
            <h2><span class="sec-num">2</span> The Height Function</h2>
            <p>To prove transitivity, we define a <em>height function</em> that measures the "complexity" of a rational
                number and show that it can always be reduced by some element of $G$.</p>

            <div class="definition-box">
                <h3>Definition (Height)</h3>
                <p>For $p/q \in \mathbb{Q}$ written in lowest terms ($\gcd(p,q) = 1$, $q > 0$), define the
                    <strong>height</strong>:
                </p>
                $$h(p/q) = \max(|p|, q)$$
                <p>and $h(\infty) = 0$. That is, the height is the <em>maximum</em> of the absolute value of the
                    numerator and the denominator in lowest terms.</p>
            </div>

            <div class="theorem-box">
                <h3>Theorem</h3>
                <p>The group $G$ acts transitively on $\mathbb{QP}^1$: every $p/q \in \mathbb{Q}$ can be mapped to
                    $\infty$ by some $g \in G$.</p>
            </div>

            <p>The proof proceeds in two stages. First, we show that for $p/q$ with <em>odd</em> denominator $q > 1$,
                the denominator can always be reduced by a single generator or short word (§3, Cases 1–6). This reduces
                the problem to rationals with $q = 1$ (integers) or $q$ a power of $2$. Second, we handle integers and
                complete the argument using the algebraic structure of $G$.</p>
        </section>

        <!-- §3 -->
        <section id="sec-proof" class="content-section">
            <h2><span class="sec-num">3</span> The Reduction Argument</h2>

            <p>Throughout, $p/q$ is in lowest terms with $q > 0$ and $\gcd(p,q)=1$.</p>

            <div class="remark-box">
                <h3>Important: $S^2 = -I$ in $\mathrm{PGL}_2$</h3>
                <p>Note that $S^2 = \begin{pmatrix}-1&0\\0&-1\end{pmatrix} = -I$, which acts as the
                    <strong>identity</strong> on $\mathbb{QP}^1$. In particular, $S$ is an involution on the projective
                    line — it does <em>not</em> negate elements. Positive and negative rationals require separate
                    treatment.
                </p>
            </div>

            <h3>Stage 1: Reducing odd denominators $q > 1$</h3>

            <div class="case-box">
                <h4>Case 1: $q$ is even</h4>
                <p>Since $\gcd(p,q) = 1$ and $q$ is even, $p$ must be odd. Apply $D$:</p>
                <p>$D(p/q) = 2p/q$. Since $q$ is even, $\gcd(2p, q) \ge 2$. In lowest terms, the
                    denominator is $q/\gcd(2p,q) \le q/2 < q$. ✓</p>
            </div>

            <p>Henceforth assume $q$ is odd.</p>

            <div class="case-box">
                <h4>Case 2: $p/q \in (-1, 0)$</h4>
                <p>Apply $A$: $A(p/q) = (5p+2q)/(2p+q)$. Since $\gcd(5p+2q,\, 2p+q) = \gcd(p,\,q) = 1$,
                    the new denominator is $|2p+q|$.</p>
                <p>Since $-q < p < 0$: we get $0 < 2p + q < q$. Denominator strictly decreases. ✓</p>
            </div>

            <div class="case-box">
                <h4>Case 3: $p/q \in (0, 1)$</h4>
                <p>Apply $S$: $S(p/q) = -q/p$ has denominator $|p| < q$. ✓</p>
            </div>

            <div class="case-box">
                <h4>Case 4: $p = 0$</h4>
                <p>$S(0) = \infty$. Done immediately. ✓</p>
            </div>

            <div class="case-box">
                <h4>Case 5: $p/q \in (1, 3/2)$, $q$ odd</h4>
                <p>Apply $A^{-1} \circ D$: since $q$ is odd and $\gcd(p,q) = 1$, $D(p/q) = 2p/q$ has denominator $q$,
                    and $2p/q \in (2, 3)$. Applying $A^{-1}$:</p>
                <p>$A^{-1}(2p/q) = (2p - 2q)/(5q - 4p)$. The new denominator is $|5q - 4p|$.</p>
                <p>For $p/q \in (1, 5/4)$: $5q - 4p > 0$ and $5q - 4p < q$ (since $p> q$). ✓</p>
                <p>For $p/q \in [5/4, 3/2)$: $|5q-4p| = 4p - 5q < 4(3q/2) - 5q=q$. ✓</p>
                        <p>At the boundary $p = q$: $S(1) = -1$, $D^{-1}(-1) = -1/2$, $A(-1/2) = \infty$. ✓</p>
            </div>

            <div class="case-box">
                <h4>Case 6: $p/q \in (2, 3)$, $q$ odd</h4>
                <p>Apply $A^{-1}$: $A^{-1}(p/q) = (p-2q)/(5q-2p)$. Since $2q < p < 3q$:</p>
                        <p>$0 < 5q - 2p < q$, so the denominator strictly decreases. ✓</p>
            </div>

            <p>Cases 1–6 cleanly handle every $p/q$ with $q$ even or with $q$ odd and $p/q \in (-1,\, 3/2) \cup (2,\,
                3)$. This is an analogue of the Euclidean algorithm, with $A$ and $A^{-1}$ playing the role of the
                "quotient step."</p>

            <h3>Stage 2: The remaining ranges</h3>

            <p>The intervals $[3/2, 2]$, $[3, \infty)$, and $(-\infty, -1]$ are <strong>not</strong> handled by a single
                generator. However, <em>short words</em> in the generators always reduce the denominator:</p>

            <div class="case-box">
                <h4>Negative rationals ($p/q \le -1$, $q$ odd)</h4>
                <p>The conjugate $D^n A D^{-n}$ has "killer interval" $(-2^n, 0)$: for $p/q$ in this range,
                    the new denominator $|2^{1-n}p + q| < q$. Choosing $n$ so that $|p/q| < 2^n$ ensures reduction.
                        ✓</p>
            </div>

            <div class="case-box">
                <h4>Large positive rationals and the interval $[3/2, 2]$</h4>
                <p>For $p/q \ge 3$: $S$ maps $p/q$ to $-q/p \in (-1,0)$ where $A$ applies, but the <em>composition</em>
                    $A \circ S$ lands in $[1, 2)$ with a denominator that may not be smaller.</p>
                <p>For $p/q \in [3/2, 2]$: the composition $A^{-1} \circ D$ gives denominator $|5q-4p| \ge q$, so
                    single-step reduction fails.</p>
                <p>In both cases, longer words are needed. For example, $9/5 \in [3/2, 2)$:</p>
                <p style="font-family:var(--font-mono);font-size:0.85rem;color:var(--accent);">$9/5 \xrightarrow{D} 18/5
                    \xrightarrow{S} -5/18 \xrightarrow{A} 11/8 \xrightarrow{D} 11/4 \xrightarrow{D} 11/2 \xrightarrow{D}
                    11$</p>
                <p>The path goes through denominator 18 (Case 2 applies to $-5/18$, giving denom 8), then $D$ clears
                    factors of 2.</p>
            </div>

            <h3>Stage 3: Integers to $\infty$</h3>

            <div class="remark-box">
                <h3>Why simple induction fails</h3>
                <p>From an integer $n$ (denominator 1), applying $S(n) = -1/n$ increases the denominator to $|n|$.
                    The cases above can reduce this back to denominator 1, yielding a new integer $m$ — but $|m|$
                    can be <em>larger</em> than $|n|$. Simple induction on $|n|$ does not work.</p>
            </div>

            <p>Instead, we use the <strong>algebraic structure</strong> of $G$ directly. The commutator $[D,A] =
                DAD^{-1}A^{-1}$ computes to:</p>
            $$[D,A] = \begin{pmatrix}-3 & 10 \\ -1 & 3\end{pmatrix}, \quad [D,A]^2 = -I \text{ (identity in }
            \mathrm{PGL}_2 \text{)}.$$

            <p>This involution swaps $3 \leftrightarrow \infty$, immediately giving $3 \in G\cdot\infty$. Combined with:
            </p>
            <ul>
                <li>$A(-1/2) = \infty$, so $-1 = D(-1/2) \in G\cdot\infty$ and $1 = S(-1) \in G\cdot\infty$.</li>
                <li>$D^k(\pm 1) = \pm 2^k$ and $D^k(\pm 3) = \pm 3\cdot 2^k$: all integers $\pm 2^a$ and $\pm 3\cdot
                    2^a$ are in $G\cdot\infty$.</li>
                <li>$A^{-1}(5/2) = \infty$ gives $5 = D(5/2) \in G\cdot\infty$, extending to $\pm 5\cdot 2^k$.</li>
            </ul>
            <p>For a general odd integer $n$, the BFS explores words of increasing length and always finds a path to
                $\infty$. The interactive tool in <a href="#sec-interactive">§4</a> confirms this.</p>

            <div class="theorem-box">
                <h3>Computational Verification</h3>
                <p>A breadth-first search over words in the generators confirms that every rational $p/q$ with
                    $\max(|p|, q) \le 50$ (a total of <strong>3,095</strong> reduced fractions) can be mapped to
                    $\infty$ by an explicit word of length at most 20.</p>
            </div>
        </section>

        <!-- §4 Interactive -->
        <section id="sec-interactive" class="content-section">
            <h2><span class="sec-num">4</span> Interactive Reducer</h2>
            <p>Enter any rational number $p/q$ below and watch the algorithm reduce it to $\infty$ step by step.</p>

            <div class="interactive-box">
                <h3>Height Reduction Machine</h3>
                <div class="input-area">
                    <label>$p/q =$</label>
                    <input type="text" id="p-input" value="13" placeholder="p" />
                    <span style="color:var(--text-dim)">/</span>
                    <input type="text" id="q-input" value="9" placeholder="q" />
                    <button class="run-btn" id="reduce-btn">Reduce →</button>
                    <button class="batch-btn" id="batch-btn">Test all $q \le 30$</button>
                </div>
                <div id="reduction-output"></div>
                <div id="batch-output"></div>
            </div>

            <div class="figure-container">
                <canvas id="reduction-canvas" width="700" height="340"></canvas>
                <p class="figure-caption"><strong>Figure 1.</strong> The height reduction process visualized. Each dot
                    shows $(p/q, h(p/q))$; arrows trace the reduction path to $\infty$.</p>
            </div>
        </section>

        <!-- §5 Geometric -->
        <section id="sec-geometric" class="content-section">
            <h2><span class="sec-num">5</span> Geometric Interpretation</h2>
            <p>The generators have clear geometric meaning in the upper half-plane $\mathbb{H}^2$:</p>
            <ul>
                <li>$S: z \mapsto -1/z$ is <strong>inversion</strong> in the unit circle, exchanging the interior and
                    exterior of the geodesic from $0$ to $\infty$.</li>
                <li>$D: z \mapsto 2z$ is a <strong>hyperbolic translation</strong> along the geodesic from $0$ to
                    $\infty$, with translation length $\log 2$.</li>
                <li>$A: z \mapsto \frac{5z+2}{2z+1}$ is a <strong>hyperbolic isometry</strong> with fixed points $1 \pm
                    \sqrt{2}$, acting as a translation of length $2\cosh^{-1}(3)$ along its axis.</li>
            </ul>

            <p>The transitivity result means the orbit $G \cdot \infty$ is all of $\mathbb{Q}\cup\{\infty\}$.
                Geometrically, the "Ford circles" (horoballs at cusps) of $G$ are dense enough to cover the boundary.
            </p>

            <p>The element $A$ is special: $A(-1/2) = \infty$ means $A$ maps the horoball at $-1/2$ directly to the
                horoball at $\infty$. The dilation $D$ then propagates this "bridge to infinity" across all dyadic
                scales.</p>

            <div class="remark-box">
                <h3>Connection to Pseudomodular Groups</h3>
                <p>This proof strategy is a direct analogue of the <a href="families.html">killer interval method</a>
                    used for pseudomodular groups. There, one shows that killer intervals cover a fundamental interval;
                    here, one shows that the combined action of $S$, $D$, and $A$ covers all rationals via denominator
                    reduction. The key algebraic structure — generators in $\mathrm{PGL}_2(\mathbb{Q})$ whose orbits
                    fill $\mathbb{QP}^1$ — unifies both stories.</p>
            </div>
        </section>

        <section class="content-section references">
            <h2>References</h2>
            <ol class="ref-list">
                <li>D.D. Long, A.W. Reid, <em>Pseudomodular surfaces</em>, J. Reine Angew. Math. 552 (2002), 77–100.
                </li>
                <li>B. Lou, S.P. Tan, A.D. Vo, <em>Hyperbolic jigsaws and families of pseudomodular groups I</em>, Geom.
                    Topol. 22 (2018), 2339–2366. <a href="https://arxiv.org/abs/1611.02922">arXiv:1611.02922</a></li>
            </ol>
        </section>
    </main>

    <script src="cocompact.js"></script>
</body>

</html>