<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Compact Surface Groups in PGL₂(ℤ[1/p]) — An Interactive Walkthrough</title>
  <meta name="description"
    content="An interactive construction of cocompact lattices in PGL_2(Z[1/p]) via congruence subgroups and cusp cutting." />
  <link rel="stylesheet" href="style.css" />
  <script>
    window.MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']],
        macros: {
          Z: '\\mathbb{Z}',
          Q: '\\mathbb{Q}',
          R: '\\mathbb{R}',
          H: '\\mathbb{H}',
          PSL: '\\mathrm{PSL}',
          PGL: '\\mathrm{PGL}',
          SL: '\\mathrm{SL}',
          GL: '\\mathrm{GL}',
          Gam: '\\Gamma',
        }
      },
      options: { skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre'] }
    };
  </script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>

<body>
  <div id="app">

    <!-- ======================================================
         LEFT: WALKTHROUGH SLIDES
         ====================================================== -->
    <div id="walkthrough">
      <div id="slide-viewport">

        <!-- ===================== SLIDE 0: INTRODUCTION ===================== -->
        <div class="slide active" data-slide="0" data-canvas="intro">
          <div class="chapter-label">The Construction</div>
          <h1>Compact Surfaces in <span class="highlight">$\PGL_2(\Z[1/p])$</span></h1>

          <p>
            Arithmetic groups like $\PSL_2(\Z)$ act on the upper half plane $\H$
            with a fundamental domain of <strong>finite area</strong> but
            <strong>non-compact</strong> — the domain has cusps that reach to
            infinity.
          </p>

          <div class="big-question">
            Can we modify $\PSL_2(\Z)$ to obtain a group whose quotient is
            a <strong>compact</strong> hyperbolic surface?
          </div>

          <p>
            The answer is yes. By passing to a congruence subgroup, identifying
            cusp pairs, and gluing via an element of $\PGL_2(\Z[1/p])$,
            we construct a cocompact lattice. Let's walk through the
            construction step by step.
          </p>

          <div class="prime-row">
            <span class="prime-label">Choose a prime:</span>
            <select id="prime-select" class="prime-select">
              <option value="3" selected>p = 3</option>
              <option value="5">p = 5</option>
              <option value="7">p = 7</option>
              <option value="11">p = 11</option>
              <option value="13">p = 13</option>
              <option value="17">p = 17</option>
              <option value="19">p = 19</option>
              <option value="23">p = 23</option>
            </select>
          </div>

          <div class="interact-prompt">
            Click <strong>Next</strong> or press <span class="key-hint">→</span> to continue
          </div>
        </div>

        <!-- ===================== SLIDE 1: PSL_2(Z) TILING ===================== -->
        <div class="slide" data-slide="1" data-canvas="psl2z-tiling">
          <div class="chapter-label">Step 1 · The Modular Group</div>
          <h2>The $\PSL_2(\Z)$ Tiling</h2>

          <p>
            The modular group $\PSL_2(\Z)$ acts on the upper half plane
            $\H = \{z \in \mathbb{C} : \mathrm{Im}(z) > 0\}$
            by Möbius transformations:
          </p>

          <div class="math-block">
            $\begin{pmatrix} a & b \\ c & d \end{pmatrix} \cdot z = \frac{az + b}{cz + d}$
          </div>

          <p>
            The fundamental domain for $\PSL_2(\Z)$ is the region
            $\mathcal{F} = \{ z \in \H : |z| \geq 1,\, |\mathrm{Re}(z)| \leq \tfrac{1}{2} \}$.
            It is generated by two elements:
          </p>

          <div class="math-block">
            $T = \begin{pmatrix} 1 & 1 \\ 0 & 1 \end{pmatrix}, \quad
             S = \begin{pmatrix} 0 & -1 \\ 1 & 0 \end{pmatrix}$
          </div>

          <p>
            $T$ is a translation $z \mapsto z + 1$ and $S$ is the inversion
            $z \mapsto -1/z$. Together they generate the full Farey tessellation
            of $\H$ visible on the canvas.
          </p>

          <div class="interact-prompt">
            Click <strong>T</strong> or <strong>S</strong> to animate their action
          </div>
        </div>

        <!-- ===================== SLIDE 2: GAMMA_0(2p) ===================== -->
        <div class="slide" data-slide="2" data-canvas="gamma0-domain">
          <div class="chapter-label">Step 2 · A Congruence Subgroup</div>
          <h2>$\Gam_0(<span class="dynamic-2p">6</span>)$</h2>

          <p>
            The congruence subgroup $\Gam_0(N)$ consists of matrices in
            $\PSL_2(\Z)$ whose lower-left entry is divisible by $N$:
          </p>

          <div class="math-block">
            $\Gam_0(N) = \left\{ \begin{pmatrix} a & b \\ c & d \end{pmatrix} \in \PSL_2(\Z) : N \mid c \right\}$
          </div>

          <p>
            For $N = 2p = $ <strong class="dynamic-2p">6</strong>,
            the index in $\PSL_2(\Z)$ is
          </p>

          <div class="math-block">
            $[\PSL_2(\Z) : \Gam_0(2p)] = 3(p + 1) = $ <strong id="index-display">12</strong>
          </div>

          <p>
            The fundamental domain for $\Gam_0(<span class="dynamic-2p">6</span>)$ is the
            union of <strong id="index-display-2">12</strong> translates of $\mathcal{F}$,
            shown on the canvas with different colors.
          </p>

          <div class="insight">
            <p>
              <strong>Key fact:</strong> This larger domain still has finite area
              but has <strong>four cusps</strong> — points at infinity where
              the domain tapers off.
            </p>
          </div>
        </div>

        <!-- ===================== SLIDE 3: THE FOUR CUSPS ===================== -->
        <div class="slide" data-slide="3" data-canvas="cusps">
          <div class="chapter-label">Step 3 · Cusps</div>
          <h2>The Four Cusps</h2>

          <p>
            Since $2p$ is squarefree, the cusps of
            $\Gam_0(<span class="dynamic-2p">6</span>)$ correspond to the
            divisors of $2p$. There are exactly <strong>four</strong>:
          </p>

          <ul class="reveal-list" id="cusp-list">
            <li>
              <strong>$\infty$</strong> — the standard cusp, with width
              <strong>1</strong>
            </li>
            <li>
              <strong>$0$</strong> — with width
              <strong class="dynamic-2p">6</strong>
            </li>
            <li>
              <strong>$1/2$</strong> — with width
              <strong class="dynamic-p">3</strong>
            </li>
            <li>
              <strong>$1/<span class="dynamic-p">3</span>$</strong> — with width
              <strong>2</strong>
            </li>
          </ul>

          <p>
            The cusp <em>widths</em> sum to the index:
            $1 + <span class="dynamic-2p">6</span> + <span class="dynamic-p">3</span> + 2
            = <span id="width-sum">12</span>$.
            Each cusp is marked as a yellow dot on the real line.
          </p>

          <div class="interact-prompt">
            The four cusps are marked on the real axis
          </div>
        </div>

        <!-- ===================== SLIDE 4: CUTTING OFF CUSPS ===================== -->
        <div class="slide" data-slide="4" data-canvas="cutting">
          <div class="chapter-label">Step 4 · Pairing Curves</div>
          <h2>Cutting Off the Cusps</h2>

          <p>
            We now introduce two geodesics that <strong>pair</strong> the
            four cusps into two groups of two:
          </p>

          <div class="legend">
            <div class="legend-item">
              <div class="legend-swatch" style="background: var(--curve-alpha);"></div>
              <span>$\alpha$: geodesic from $0$ to $\infty$</span>
            </div>
            <div class="legend-item">
              <div class="legend-swatch" style="background: var(--curve-beta);"></div>
              <span>$\beta$: geodesic from $1/<span class="dynamic-p">3</span>$ to $1/2$</span>
            </div>
          </div>

          <div class="strategy-box">
            <div class="strategy-label">Strategy</div>
            <p>
              The curve $\alpha$ separates the cusps $\{0, \infty\}$ from the
              cusps $\{1/2, \, 1/<span class="dynamic-p">3</span>\}$. The curve $\beta$
              encloses the second pair. Cutting along these curves turns the
              cusped surface into a <strong>compact surface with geodesic
              boundary</strong>.
            </p>
          </div>

          <p>
            Let $\Lambda$ be the subgroup of $\Gam_0(<span class="dynamic-2p">6</span>)$
            that stabilizes the compact region between these curves. This gives
            a surface with <strong>two boundary components</strong> — one for
            each curve.
          </p>
        </div>

        <!-- ===================== SLIDE 5: CONJUGATING ELEMENT ===================== -->
        <div class="slide" data-slide="5" data-canvas="conjugation">
          <div class="chapter-label">Step 5 · Gluing</div>
          <h2>The Conjugating Element</h2>

          <p>
            The final step: we find an element $g$ that maps one boundary
            curve to the other. Consider the matrix
          </p>

          <div class="math-block">
            $g = \begin{pmatrix} 0 & -1 \\ <span class="dynamic-2p">6</span> & <span id="g-entry">-10</span> \end{pmatrix}$
          </div>

          <p>
            This matrix has determinant $\det(g) = 2p = $ <strong class="dynamic-2p">6</strong>,
            so $g \notin \PSL_2(\Z)$, but it <em>does</em> live in
            $\PGL_2(\Z[1/p])$ since $p$ is invertible in $\Z[1/p]$.
          </p>

          <div class="insight">
            <p>
              <strong>The key property:</strong> $g$ conjugates one of the
              boundary curves to the other, allowing us to <strong>glue</strong>
              the two boundary components together. The group
              $\langle \Lambda, g \rangle$ acts on $\H$ with
              a <strong>compact quotient</strong>.
            </p>
          </div>

          <div class="interact-prompt">
            Click <strong>g</strong> to animate the gluing element
          </div>
        </div>

        <!-- ===================== SLIDE 6: EXPLORE ===================== -->
        <div class="slide" data-slide="6" data-canvas="explore">
          <div class="chapter-label">Explore</div>
          <h2>The Compact Surface</h2>

          <p>
            You've seen the full construction! By starting with
            $\Gam_0(<span class="dynamic-2p">6</span>)$, cutting off cusp pairs
            with geodesics $\alpha$ and $\beta$, and gluing via the element $g$,
            we obtain a <strong>cocompact lattice</strong> in
            $\PGL_2(\Z[1/<span class="dynamic-p">3</span>])$.
          </p>

          <div class="separator"></div>

          <div class="prime-row">
            <span class="prime-label">Change prime:</span>
            <select id="prime-select-explore" class="prime-select">
              <option value="3" selected>p = 3</option>
              <option value="5">p = 5</option>
              <option value="7">p = 7</option>
              <option value="11">p = 11</option>
              <option value="13">p = 13</option>
              <option value="17">p = 17</option>
              <option value="19">p = 19</option>
              <option value="23">p = 23</option>
            </select>
          </div>

          <h3>Display Settings</h3>
          <div class="settings-row">
            <span>Show Farey tessellation</span>
            <input type="checkbox" id="show-farey" checked />
          </div>
          <div class="settings-row">
            <span>Show coset translates</span>
            <input type="checkbox" id="show-translates" checked />
          </div>
          <div class="settings-row">
            <span>Show cusps</span>
            <input type="checkbox" id="show-cusps" checked />
          </div>
          <div class="settings-row">
            <span>Show pairing curves</span>
            <input type="checkbox" id="show-curves" checked />
          </div>
        </div>

      </div>

      <!-- NAVIGATION -->
      <div id="slide-nav">
        <button class="nav-btn" id="prev-btn" disabled>
          <span class="arrow">←</span> Back
        </button>
        <div class="progress-dots" id="progress-dots"></div>
        <button class="nav-btn" id="next-btn">
          Next <span class="arrow">→</span>
        </button>
      </div>
    </div>

    <!-- ======================================================
         RIGHT: INTERACTIVE CANVAS
         ====================================================== -->
    <div id="canvas-container">
      <canvas id="canvas"></canvas>

      <div id="gen-bar"></div>

      <div id="canvas-info">
        <span class="info-badge" id="group-name-badge">Γ₀(6)</span>
        <span class="info-sub" id="anim-status"></span>
      </div>

      <div id="canvas-controls">
        <button class="canvas-ctrl-btn" id="reset-view-btn" title="Reset view">⟲</button>
      </div>
    </div>

  </div>

  <script type="module" src="js/main.js"></script>
</body>

</html>
