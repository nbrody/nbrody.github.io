<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PU(2) Relation Search</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>

<body>
    <div class="container">
        <header>
            <h1>PU(2) Relation Search</h1>
            <p class="subtitle">Finding relations in projective unitary groups</p>
        </header>

        <section class="about-section">
            <details>
                <summary>About this Search</summary>
                <div class="about-content">
                    <p>This tool searches for relations in the group generated by two unitary matrices \(A\) and \(B\).
                    </p>
                    <p>The matrix \(A\) is defined by integers \((x, y)\) as:</p>
                    <div class="math-block">
                        \[ A = \begin{pmatrix} x & y \\ -y & x \end{pmatrix} \]
                    </div>
                    <p>The matrix \(B\) is defined by integers \((a, b, c, d)\) as:</p>
                    <div class="math-block">
                        \[ B = \begin{pmatrix} a+bi & c+di \\ -c+di & a-bi \end{pmatrix} \]
                    </div>
                    <p>The search algorithm uses a <strong>Beam Search</strong> to find product of generators that
                        evaluate to a scalar multiple of the identity matrix in \( \mathsf{PU}(2) \). It minimizes the
                        determinant of the 4x4 integer representation to guide the search.</p>
                </div>
            </details>
        </section>

        <div class="main-content">
            <section class="controls panel">
                <h2>Parameters</h2>
                <div class="input-grid">
                    <div class="input-subgroup">
                        <h3>Generator A (x, y)</h3>
                        <div class="row">
                            <input type="number" id="x" value="4" step="1">
                            <input type="number" id="y" value="5" step="1">
                        </div>
                    </div>
                    <div class="input-subgroup">
                        <h3>Generator B (a, b, c, d)</h3>
                        <div class="row">
                            <input type="number" id="a" value="3" step="1">
                            <input type="number" id="b" value="1" step="1">
                            <input type="number" id="c" value="3" step="1">
                            <input type="number" id="d" value="9" step="1">
                        </div>
                    </div>
                    <div class="input-subgroup">
                        <h3>Search Settings</h3>
                        <div class="row">
                            <div class="field">
                                <label>Beam Width</label>
                                <input type="number" id="beam" value="5000">
                            </div>
                            <div class="field">
                                <label>Target Count</label>
                                <input type="number" id="stop" value="3">
                            </div>
                        </div>
                        <div class="row" style="margin-top: 1rem">
                            <div class="field">
                                <label>Max Iterations</label>
                                <input type="number" id="max_iter" value="100000">
                            </div>
                            <div class="field">
                                <label>Random Rate</label>
                                <input type="number" id="random_rate" value="0.1" step="0.01">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="actions">
                    <button id="solve-btn" class="primary-btn">Start Search</button>
                    <button id="stop-btn" class="secondary-btn" disabled>Stop</button>
                </div>
            </section>

            <section class="dashboard">
                <div class="status-panel panel">
                    <h2>Live Progress</h2>
                    <div class="status-grid">
                        <div class="status-item">
                            <span class="label">Iteration</span>
                            <span id="curr-iter" class="value">-</span>
                        </div>
                        <div class="status-item">
                            <span class="label">Depth</span>
                            <span id="curr-depth" class="value">-</span>
                        </div>
                        <div class="status-item">
                            <span class="label">Best Score</span>
                            <span id="best-score" class="value">-</span>
                        </div>
                    </div>
                    <div class="current-word">
                        <span class="label">Best Word:</span>
                        <code id="best-word">-</code>
                        <div id="best-matrix" class="math-block"
                            style="margin-top: 1rem; min-height: 2em; display: flex; align-items: center; justify-content: center;">
                            <!-- Matrix will appear here -->
                        </div>
                    </div>
                </div>

                <div class="log-panel panel">
                    <h2>Logs</h2>
                    <div id="logs" class="log-output"></div>
                </div>
            </section>

            <section class="results-panel panel">
                <h2>Relations Found</h2>
                <div id="results-list" class="results-grid">
                    <!-- Results -->
                </div>
            </section>
        </div>
    </div>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>

</html>